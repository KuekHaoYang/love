<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è‡´ä½  ğŸ’Œ</title>
    <style>
        /* ==========================================
           1. Apple Design Variables
           ========================================== */
        :root {
            --material-thick-dark: rgba(30, 30, 30, 0.55);
            --radius-fluid: clamp(20px, 4vw, 36px);
            --padding-fluid: clamp(24px, 5vw, 64px);
            --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
            --spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* ==========================================
           2. Global Setup & Ambient Background
           ========================================== */
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: #000;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Arial, sans-serif;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            color: white;
            -webkit-font-smoothing: antialiased;
            touch-action: none;
            user-select: none;
            cursor: pointer; /* å…¨å±€æç¤ºå¯ç‚¹å‡» */
        }

        .bg-container {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            overflow: hidden; z-index: 0; pointer-events: none;
        }

        .bg-blob {
            position: absolute; top: -50%; left: -50%;
            width: 200vw; height: 200vh;
            /* å”¯ç¾æµªæ¼«çš„ç´«ç²‰è‰²è°ƒï¼Œæå…·è‹¹æœåŸç”Ÿé«˜çº§æ„Ÿ */
            background: radial-gradient(circle at 50% 50%, rgba(88,86,214,0.4) 0%, rgba(255,45,85,0.4) 30%, rgba(255,149,0,0.2) 60%, transparent 80%);
            animation: spin 15s linear infinite;
            transform-origin: center center;
            will-change: transform;
        }

        @keyframes spin {
            0% { transform: rotate(0deg) translate3d(0,0,0); }
            100% { transform: rotate(360deg) translate3d(0,0,0); }
        }

        /* ==========================================
           3. Liquid Glass Card
           ========================================== */
        .glass-card {
            position: relative; z-index: 10;
            width: 90vw; max-width: 600px;
            min-height: clamp(350px, 50vh, 500px); aspect-ratio: 4/5;
            border-radius: var(--radius-fluid);
            background: var(--material-thick-dark);
            backdrop-filter: blur(40px) saturate(150%);
            -webkit-backdrop-filter: blur(40px) saturate(150%);
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.15), 0 20px 40px rgba(0, 0, 0, 0.4);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            padding: var(--padding-fluid); text-align: center;
            
            /* å…¥åœºåŠ¨ç”»æå…¶è½»æŸ”ç¼“æ…¢ï¼Œçƒ˜æ‰˜æ·±æƒ…æ°›å›´ */
            transform: translate3d(0, 20px, 0) scale(0.95); opacity: 0;
            animation: cardPopIn 1.5s var(--ease-out-expo) forwards;
        }
        @media (max-aspect-ratio: 3/4) {
            .glass-card { aspect-ratio: auto; height: 65vh; }
        }
        @keyframes cardPopIn { to { transform: translate3d(0, 0, 0) scale(1); opacity: 1; } }

        /* ==========================================
           4. Interactive Typography
           ========================================== */
        #textContainer {
            position: absolute; width: 85%;
            display: flex; justify-content: center; align-items: center;
            pointer-events: none;
        }

        .text-line {
            font-size: clamp(20px, 4.5vw, 32px);
            font-weight: 500; letter-spacing: 0.015em; line-height: 1.5;
            position: absolute; width: 100%;
            opacity: 0; transform: translate3d(0, 20px, 0);
            transition: opacity 0.8s var(--ease-out-expo), transform 0.8s var(--ease-out-expo);
            will-change: transform, opacity;
        }

        .text-line.active { opacity: 1; transform: translate3d(0, 0, 0); }
        .text-line.exit { opacity: 0; transform: translate3d(0, -20px, 0); }

        /* å‘¼å¸ç¯æç¤ºéŸ³æ•ˆï¼šè½»è§¦å±å¹•ç»§ç»­ */
        .tap-hint {
            position: absolute; bottom: 30px;
            font-size: 13px; color: rgba(255, 255, 255, 0.5);
            letter-spacing: 0.05em; font-weight: 400;
            opacity: 0; transition: opacity 1s ease;
            animation: pulseHint 2.5s infinite ease-in-out;
            pointer-events: none;
        }
        .tap-hint.visible { opacity: 1; }
        @keyframes pulseHint { 
            0%, 100% { transform: translate3d(0,0,0); opacity: 0.3; } 
            50% { transform: translate3d(0,-3px,0); opacity: 0.8; } 
        }

        /* å¼€å§‹æ—¶çš„å±å¹•é®ç½©ï¼ˆç”¨äºè·å–éŸ³é¢‘æƒé™ï¼‰ */
        #startOverlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.8); z-index: 999;
            display: flex; justify-content: center; align-items: center;
            color: white; font-size: 16px; letter-spacing: 2px;
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            transition: opacity 1s ease;
        }

        /* ==========================================
           5. The Punchline (è­¦æŠ¥ä¸æ¶æ)
           ========================================== */
        .red-alert {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background-color: #FF3B30; opacity: 0; z-index: 1; pointer-events: none;
            transition: opacity 0.1s ease;
        }
        .red-alert.active { opacity: 1; animation: pulseRed 0.3s infinite alternate; }
        @keyframes pulseRed { from { opacity: 0.7; } to { opacity: 1; } }

        .punchline-text {
            font-size: clamp(40px, 12vw, 80px) !important;
            font-weight: 900 !important; color: #FF3B30;
            text-shadow: 0px 0px 30px rgba(255, 59, 48, 0.8);
            letter-spacing: 0.05em;
            opacity: 0; transform: scale(0.5) translate3d(0, 20px, 0);
            white-space: nowrap; transition: none; 
        }
        .punchline-text.boom {
            opacity: 1; transform: scale(1) translate3d(0, 0, 0);
            transition: all 0.4s var(--spring) !important;
            animation: textShake 0.1s infinite;
        }
        @keyframes textShake {
            0% { transform: translate3d(3px, 2px, 0) rotate(0deg); }
            25% { transform: translate3d(-3px, -2px, 0) rotate(-1deg); }
            50% { transform: translate3d(0px, 4px, 0) rotate(1deg); }
            75% { transform: translate3d(-2px, 2px, 0) rotate(-2deg); }
            100% { transform: translate3d(2px, -3px, 0) rotate(1deg); }
        }
    </style>
</head>
<body>

    <!-- å¿…é¡»æœ‰è¿™ä¸ªé®ç½©å±‚ï¼Œæµè§ˆå™¨æ‰å…è®¸è‡ªåŠ¨æ’­æ”¾éŸ³ä¹ -->
    <div id="startOverlay">ç‚¹å‡»ä»»æ„å¤„å¼€å¯è¿™å°ä¿¡...</div>

    <div class="bg-container"><div class="bg-blob"></div></div>
    <div class="red-alert" id="redAlert"></div>

    <!-- èƒŒæ™¯éŸ³ä¹ï¼šæå…¶æ¸©æŸ”æµªæ¼«çš„é’¢ç´æ›² -->
    <audio id="bgm" src="https://upload.wikimedia.org/wikipedia/commons/1/1f/Gymnop%C3%A9die_No._1.ogg" loop preload="auto"></audio>
    <!-- æ¶ææ‰“æ–­éŸ³æ•ˆ -->
    <audio id="scratch" src="https://upload.wikimedia.org/wikipedia/commons/d/d4/Record_scratch.ogg" preload="auto"></audio>

    <div class="glass-card" id="card">
        <div id="textContainer"></div>
        <div class="tap-hint" id="tapHint">è½»è§¦å±å¹•ç»§ç»­</div>
    </div>

    <script>
        const startOverlay = document.getElementById('startOverlay');
        const textContainer = document.getElementById('textContainer');
        const tapHint = document.getElementById('tapHint');
        const bgm = document.getElementById('bgm');
        const scratch = document.getElementById('scratch');
        const redAlert = document.getElementById('redAlert');

        /* 
           æ–‡æ¡ˆè®¾è®¡é€»è¾‘ï¼š
           1-4å¥ï¼šæå…¶çœŸè¯šã€æš§æ˜§ï¼Œè®©ä»–å½»åº•æ²¦é™·ï¼Œä»¥ä¸ºçœŸçš„æ˜¯æ·±æƒ…å‘Šç™½ã€‚
           5-6å¥ï¼šçªç„¶ç”»é£ä¸€è½¬ï¼Œåˆ‡å…¥å®¢è§‚æè¿°ï¼Œåˆ©ç”¨ä»–å½“ä¸‹çš„è¡Œä¸ºä½œä¸ºè®ºæ®ã€‚
           7å¥ï¼ˆPunchlineï¼‰ï¼šå¾—å‡ºæ— æ³•åé©³çš„æ¶æ¯’ç»“è®ºã€‚
        */
        const scriptLines = [
            "å…¶å®ï¼Œæœ‰å‡ å¥è¯ï¼Œä¸€ç›´è—åœ¨å¿ƒé‡Œæ²¡æ•¢å‘Šè¯‰ä½ ...",
            "æ¯æ¬¡çœ‹åˆ°ä½ ï¼Œæˆ–è€…æƒ³èµ·ä½ çš„æ—¶å€™ï¼Œ",
            "æ€»è§‰å¾—è¿å‘¨å›´çš„ç©ºæ°”éƒ½å˜å¾—å¾ˆæ¸©æŸ”ã€‚",
            "æˆ‘ç»ˆäºé¼“èµ·å‹‡æ°”ï¼Œæƒ³åœ¨è¿™ä¸ªç‰¹æ®Šçš„ç½‘é¡µé‡Œï¼Œå¯¹ä½ å¦ç™½...",
            "å¦ç™½åœ°è¯´ï¼Œæˆ‘åˆšæ‰ä¸€ç›´èº²åœ¨å±å¹•åé¢è§‚å¯Ÿä½ ã€‚",
            "çœ‹ç€ä½ æ»¡æ€€æœŸå¾…åœ°ã€ä¹–ä¹–åœ°ã€ä¸€æ¬¡åˆä¸€æ¬¡ç‚¹å‡»å±å¹•ï¼Œä»¥ä¸ºæˆ‘è¦å˜æˆå°ä¸‘çš„æ ·å­...",
            "è¿™å°±å¯¼è‡´æˆ‘å¾—å‡ºäº†ä¸€ä¸ªä¸¥è°¨çš„ç»“è®ºï¼š"
        ];
        
        const punchline = "ä½ æ˜¯å¤§å‚»é€¼ï¼ï¼ï¼ğŸ¤ª";

        let currentIndex = -1;
        let isAnimating = false;
        let isStarted = false;

        const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        // æ¸²æŸ“ä¸‹ä¸€å¥è¯çš„é€»è¾‘
        async function showNextLine() {
            if (isAnimating) return;
            isAnimating = true;

            const currentLine = document.querySelector('.text-line.active');
            if (currentLine) {
                currentLine.classList.remove('active');
                currentLine.classList.add('exit');
                await wait(600); // ç­‰æ—§å­—é£å‡º
                currentLine.remove(); 
            }

            currentIndex++;

            // æµªæ¼«é“ºå« + é€»è¾‘åè½¬é˜¶æ®µ
            if (currentIndex < scriptLines.length) {
                const newEl = document.createElement('div');
                newEl.className = 'text-line';
                newEl.textContent = scriptLines[currentIndex];
                textContainer.appendChild(newEl);
                
                void newEl.offsetWidth; 
                newEl.classList.add('active');
                
                // å»¶é•¿é”å®šæ—¶é—´ï¼Œå¼ºè¿«ä»–æ…¢æ…¢çœ‹ï¼Œå¢åŠ æ²‰æµ¸æ„Ÿ
                await wait(800); 
                isAnimating = false;
            } 
            // æœ€ç»ˆè‡´å‘½ä¸€å‡»é˜¶æ®µ
            else if (currentIndex === scriptLines.length) {
                tapHint.classList.remove('visible');

                // éŸ³ä¹æˆ›ç„¶è€Œæ­¢ï¼Œåˆ®ç›˜å£°èµ·
                bgm.pause();
                try { scratch.currentTime = 0; scratch.play(); } catch(e){}

                // èƒŒæ™¯ç¬é—´å˜çº¢è­¦æŠ¥
                redAlert.classList.add('active'); 

                const boomEl = document.createElement('div');
                boomEl.className = 'text-line punchline-text';
                boomEl.textContent = punchline;
                textContainer.appendChild(boomEl);

                void boomEl.offsetWidth;
                boomEl.classList.add('boom'); 

                if (navigator.vibrate) {
                    navigator.vibrate([500, 100, 500, 100, 500]);
                }
                
                document.body.style.cursor = 'default';
            }
        }

        // åˆå§‹åŒ–ï¼šç‚¹å‡»å…¨å±ä»»æ„ä½ç½®ï¼Œå¼€å§‹æ’­æ”¾éŸ³ä¹å¹¶æ˜¾ç¤ºç¬¬ä¸€å¥è¯
        document.body.addEventListener('click', async () => {
            if (!isStarted) {
                isStarted = true;
                
                // 1. æ’­æ”¾éŸ³ä¹
                try { bgm.volume = 0.5; await bgm.play(); } catch(e){}
                
                // 2. éšè—åˆå§‹é®ç½©å±‚
                startOverlay.style.opacity = '0';
                setTimeout(() => { startOverlay.style.display = 'none'; }, 1000);

                // 3. ç¨ä½œåœé¡¿ï¼Œæ˜¾ç¤ºç¬¬ä¸€å¥è¯å’Œæç¤º
                await wait(800);
                showNextLine();
                setTimeout(() => { tapHint.classList.add('visible'); }, 2000);
            } 
            else if (currentIndex < scriptLines.length) {
                // åç»­çš„æ¯æ¬¡ç‚¹å‡»ï¼Œåˆ‡æ¢ä¸‹ä¸€å¥è¯
                showNextLine();
            }
        });

    </script>
</body>
</html>