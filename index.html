<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¸€ä»½ä¸“å±çš„è¡Œä¸ºè¯„ä¼°æŠ¥å‘Š</title>
    <style>
        /* ==========================================
           1. Apple Design Variables & RWD
           ========================================== */
        :root {
            --material-thick-dark: rgba(30, 30, 30, 0.55);
            --radius-fluid: clamp(20px, 4vw, 36px);
            --padding-fluid: clamp(24px, 5vw, 64px);
            /* Apple æ ‡å‡†ç¼“åŠ¨æ›²çº¿ */
            --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
            --spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* ==========================================
           2. Global Setup & GPU Accelerated Background
           ========================================== */
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: #000;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Arial, sans-serif;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            color: white;
            -webkit-font-smoothing: antialiased;
            touch-action: none; /* ç¦ç”¨ç³»ç»Ÿé»˜è®¤æ»šåŠ¨ç¼©æ”¾ï¼Œä¸“é—¨ç”¨äºç‚¹å‡» */
            user-select: none; /* é˜²æ­¢é•¿æŒ‰é€‰ä¸­æ–‡æœ¬ç ´åŠŸ */
        }

        .bg-container {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            overflow: hidden; z-index: 0; pointer-events: none;
        }

        .bg-blob {
            position: absolute; top: -50%; left: -50%;
            width: 200vw; height: 200vh;
            background: radial-gradient(circle at 50% 50%, rgba(88,86,214,0.4) 0%, rgba(255,45,85,0.4) 30%, rgba(255,149,0,0.2) 60%, transparent 80%);
            animation: spin 15s linear infinite;
            transform-origin: center center;
            will-change: transform;
        }

        @keyframes spin {
            0% { transform: rotate(0deg) translate3d(0,0,0); }
            100% { transform: rotate(360deg) translate3d(0,0,0); }
        }

        /* æ¶æåè½¬è­¦æŠ¥èƒŒæ™¯ */
        .red-alert {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background-color: #FF3B30; opacity: 0; z-index: 1; pointer-events: none;
            transition: opacity 0.1s ease;
        }
        .red-alert.active {
            opacity: 1; animation: pulseRed 0.3s infinite alternate;
        }
        @keyframes pulseRed { from { opacity: 0.7; } to { opacity: 1; } }

        /* ==========================================
           3. Responsive Liquid Glass Card
           ========================================== */
        .glass-card {
            position: relative; z-index: 10;
            width: 90vw; max-width: 600px;
            min-height: clamp(350px, 50vh, 500px); aspect-ratio: 4/5;
            border-radius: var(--radius-fluid);
            background: var(--material-thick-dark);
            backdrop-filter: blur(40px) saturate(150%);
            -webkit-backdrop-filter: blur(40px) saturate(150%);
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.15), 0 20px 40px rgba(0, 0, 0, 0.4);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            padding: var(--padding-fluid); text-align: center;
            transform: translate3d(0, 20px, 0) scale(0.95); opacity: 0;
            animation: cardPopIn 0.8s var(--spring) forwards;
            cursor: pointer; /* æç¤ºæ•´å¼ å¡ç‰‡å¯ç‚¹å‡» */
        }
        @media (max-aspect-ratio: 3/4) {
            .glass-card { aspect-ratio: auto; height: 65vh; }
        }
        @keyframes cardPopIn { to { transform: translate3d(0, 0, 0) scale(1); opacity: 1; } }

        /* ==========================================
           4. Interactive Typography & UI Elements
           ========================================== */
        /* åŠ¨æ€æ–‡å­—å®¹å™¨ */
        #textContainer {
            position: absolute; width: 85%;
            display: flex; justify-content: center; align-items: center;
            pointer-events: none;
        }

        .text-line {
            font-size: clamp(20px, 4.5vw, 32px);
            font-weight: 500; letter-spacing: 0.015em; line-height: 1.5;
            position: absolute; width: 100%;
            opacity: 0; transform: translate3d(0, 20px, 0);
            transition: opacity 0.5s var(--ease-out-expo), transform 0.5s var(--ease-out-expo);
            will-change: transform, opacity;
        }

        /* æ–‡å­—è¿›å…¥å’Œé€€å‡ºçš„çŠ¶æ€ */
        .text-line.active { opacity: 1; transform: translate3d(0, 0, 0); }
        .text-line.exit { opacity: 0; transform: translate3d(0, -20px, 0); }

        /* å¼€å§‹æŒ‰é’® */
        .apple-button {
            position: relative; z-index: 100; pointer-events: auto;
            background: rgba(255, 255, 255, 0.9); color: #000; border: none;
            padding: clamp(14px, 2vw, 18px) clamp(24px, 4vw, 40px);
            font-size: clamp(16px, 2.5vw, 18px); font-weight: 600;
            border-radius: clamp(12px, 2vw, 16px); cursor: pointer;
            transition: transform 0.1s ease, opacity 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1); min-height: 44px;
        }
        .apple-button:active { transform: scale(0.94); background: rgba(220, 220, 220, 0.9); }

        /* ç‚¹å‡»ç»§ç»­æç¤º (å‘¼å¸ç¯æ•ˆæœ) */
        .tap-hint {
            position: absolute; bottom: 30px;
            font-size: 13px; color: rgba(255, 255, 255, 0.4);
            letter-spacing: 0.05em; font-weight: 400;
            opacity: 0; transition: opacity 0.5s ease;
            animation: pulseHint 2s infinite ease-in-out;
            pointer-events: none;
        }
        .tap-hint.visible { opacity: 1; }
        @keyframes pulseHint { 0%, 100% { transform: scale(1); opacity: 0.3; } 50% { transform: scale(1.05); opacity: 0.7; } }

        /* ==========================================
           5. The Punchline (æ— æ³•åé©³çš„ç»“å±€)
           ========================================== */
        .punchline-text {
            font-size: clamp(40px, 12vw, 80px) !important;
            font-weight: 900 !important; color: #FF3B30;
            text-shadow: 0px 0px 30px rgba(255, 59, 48, 0.8);
            letter-spacing: 0.05em;
            opacity: 0; transform: scale(0.5) translate3d(0, 20px, 0);
            white-space: nowrap; transition: none; /* ç”± JS æ·»åŠ åŠ¨ç”»ç±» */
        }
        .punchline-text.boom {
            opacity: 1; transform: scale(1) translate3d(0, 0, 0);
            transition: all 0.4s var(--spring) !important;
            animation: textShake 0.1s infinite;
        }
        @keyframes textShake {
            0% { transform: translate3d(3px, 2px, 0) rotate(0deg); }
            25% { transform: translate3d(-3px, -2px, 0) rotate(-1deg); }
            50% { transform: translate3d(0px, 4px, 0) rotate(1deg); }
            75% { transform: translate3d(-2px, 2px, 0) rotate(-2deg); }
            100% { transform: translate3d(2px, -3px, 0) rotate(1deg); }
        }
    </style>
</head>
<body>

    <div class="bg-container"><div class="bg-blob"></div></div>
    <div class="red-alert" id="redAlert"></div>

    <audio id="bgm" src="https://upload.wikimedia.org/wikipedia/commons/1/1f/Gymnop%C3%A9die_No._1.ogg" loop preload="auto"></audio>
    <audio id="scratch" src="https://upload.wikimedia.org/wikipedia/commons/d/d4/Record_scratch.ogg" preload="auto"></audio>

    <div class="glass-card" id="card">
        <button class="apple-button" id="startBtn">ç‚¹å¼€æŸ¥çœ‹å¯¹ä½ çš„è¡Œä¸ºè¯„ä¼°</button>
        
        <div id="textContainer">
            <!-- æ–‡å­—ç”±JSåŠ¨æ€æ³¨å…¥ -->
        </div>

        <div class="tap-hint" id="tapHint">è½»è§¦å±å¹•ç»§ç»­</div>
    </div>

    <script>
        const card = document.getElementById('card');
        const startBtn = document.getElementById('startBtn');
        const textContainer = document.getElementById('textContainer');
        const tapHint = document.getElementById('tapHint');
        const bgm = document.getElementById('bgm');
        const scratch = document.getElementById('scratch');
        const redAlert = document.getElementById('redAlert');

        // é€»è¾‘æå…¶ä¸¥å¯†ï¼Œåˆ©ç”¨å—å®³è€…â€œæ­£åœ¨ç‚¹å‡»â€çš„è¡Œä¸ºæ¥åšé“ºå«
        const scriptLines = [
            "æˆ‘æœ€è¿‘ä¸€ç›´åœ¨æš—ä¸­è§‚å¯Ÿä½ ...",
            "å‘ç°ä½ èº«ä¸Šæœ‰ä¸€ä¸ªæå…¶ç½•è§çš„ç‰¹è´¨ã€‚",
            "å³ä½¿é¢å¯¹æ— èŠå’ŒæœªçŸ¥ï¼Œä½ ä¹Ÿæ€»æ˜¯å……æ»¡è€å¿ƒã€‚",
            "æ¯”å¦‚ç°åœ¨ï¼Œä½ æ­£å…¨ç¥è´¯æ³¨åœ°ç›¯ç€å±å¹•...",
            "ä¸€æ¬¡åˆä¸€æ¬¡åœ°ç‚¹å‡»ï¼ŒæœŸå¾…ç€èƒ½çœ‹åˆ°ä»€ä¹ˆæ·±æƒ…çš„å‘Šç™½...",
            "è¿™ç§æ˜çŸ¥é“å¤§æ¦‚ç‡ä¼šè¢«è€ï¼Œå´è¿˜æ˜¯ä¹–ä¹–å¬è¯ç‚¹åˆ°åº•çš„è¡Œä¸º...",
            "åœ¨ä¸´åºŠå¿ƒç†å­¦ä¸Šï¼Œæˆ‘ä»¬é€šå¸¸ä¸¥è°¨åœ°ç§°ä¹‹ä¸ºï¼š"
        ];
        // æœ€ç»ˆçš„ Punchline
        const punchline = "ä½ æ˜¯å¤§å‚»é€¼ï¼ï¼ï¼ğŸ¤ª";

        let currentIndex = -1;
        let isAnimating = false;
        let hasStarted = false;

        const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        // æ ¸å¿ƒæ’­æ”¾é€»è¾‘
        async function showNextLine() {
            if (isAnimating) return; // é˜²æ­¢ç‹‚ç‚¹å¯¼è‡´åŠ¨ç”»é”™ä¹±
            isAnimating = true;

            // å¦‚æœå·²ç»æœ‰å­—ï¼Œå…ˆè®©æ—§å­—é£˜ä¸Šå»æ¶ˆå¤±
            const currentLine = document.querySelector('.text-line.active');
            if (currentLine) {
                currentLine.classList.remove('active');
                currentLine.classList.add('exit');
                await wait(300); // ç­‰å¾…å­—é£èµ°
                currentLine.remove(); // æ¸…ç†DOM
            }

            currentIndex++;

            // æ­£å¸¸æ–‡æ¡ˆé˜¶æ®µ
            if (currentIndex < scriptLines.length) {
                const newEl = document.createElement('div');
                newEl.className = 'text-line';
                newEl.textContent = scriptLines[currentIndex];
                textContainer.appendChild(newEl);
                
                // å¼ºåˆ¶é‡æ’ä»¥è§¦å‘ CSS åŠ¨ç”»
                void newEl.offsetWidth; 
                newEl.classList.add('active');
                
                await wait(500); // é”å®šæ—¶é•¿ï¼Œé˜²æ­¢è¿ç‚¹
                isAnimating = false;
            } 
            // ç»“å±€åè½¬é˜¶æ®µï¼
            else if (currentIndex === scriptLines.length) {
                tapHint.classList.remove('visible'); // éšè—ç‚¹å‡»æç¤º

                // éŸ³ä¹åœæ­¢ï¼Œæ’­æ”¾åˆ®ç›˜å£°
                bgm.pause();
                try { scratch.currentTime = 0; scratch.play(); } catch(e){}

                redAlert.classList.add('active'); // èƒŒæ™¯å˜çº¢

                const boomEl = document.createElement('div');
                boomEl.className = 'text-line punchline-text';
                boomEl.textContent = punchline;
                textContainer.appendChild(boomEl);

                void boomEl.offsetWidth;
                boomEl.classList.add('boom'); // è§¦å‘ç‚¸è£‚åŠ¨ç”»

                // è§¦å‘æ‰‹æœºéœ‡åŠ¨
                if (navigator.vibrate) {
                    navigator.vibrate([500, 100, 500, 100, 500]);
                }
                
                // å½»åº•ç»“æŸï¼Œä¸å†å“åº”ç‚¹å‡»
                card.style.cursor = 'default';
            }
        }

        // 1. ç›‘å¬é¦–å±æŒ‰é’®ç‚¹å‡»
        startBtn.addEventListener('click', async (e) => {
            e.stopPropagation(); // é˜»æ­¢å†’æ³¡ï¼Œä»¥å…è§¦å‘å¡ç‰‡çš„ç‚¹å‡»äº‹ä»¶
            startBtn.style.opacity = '0';
            startBtn.style.pointerEvents = 'none';
            
            try { bgm.volume = 0.5; await bgm.play(); } catch(e){}

            hasStarted = true;
            setTimeout(() => {
                tapHint.classList.add('visible'); // æ˜¾ç¤ºåº•éƒ¨å°æç¤º
            }, 1000);

            showNextLine();
        });

        // 2. ç›‘å¬å¡ç‰‡ï¼ˆå…¨å±ï¼‰çš„ç‚¹å‡»è¿›è¡Œä¸‹ä¸€æ­¥
        card.addEventListener('click', () => {
            if (hasStarted && currentIndex < scriptLines.length) {
                showNextLine();
            }
        });

    </script>
</body>
</html>
